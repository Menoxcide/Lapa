v1.2.2:
  name: Prompt-Resonant Nexus
  codename: A2A-MCP-AGUI + PromptEngineer Swarm
  version: 1.2.2
  date: 2025-11-12
  branch: v1.2-nexus-loop
  git-cycle: v1.2.1-restructure → prompt-mcp-integration → phase14+ → tag-ship
  resume-from: src/orchestrator/handoffs.ts, src/swarm/delegate.ts  # PRESERVED
  target: <1s handoff, 99.7% fidelity (Bench+LangSmith+PromptRefine), 0% cloud, Prompt-Protocol-Compliant
  premium: { mo:12, yr:99 }
  license: MIT
  repo: github.com/Menoxcide/Lapa
  site: lapa.ai

  # === PROTOCOL LAYER: A2A + MCP + AG-UI (from CopilotKit + PromptEngineer MCP) ===
  protocols:
    a2a: true  # Agent-to-Agent: handshake, task negotiation, state sync
    mcp: v1.2  # Model Context Protocol: JSON-RPC/WebSocket + stdio transport (PromptEngineer)
    ag-ui: v1.0 # Agent-to-UI: generative components, event streams
    ui-specs: mcp-ui + open-json-ui  # For dynamic Studio UI + interactive Q&A
    lpsp: v1.0  # LAPA Phase Summary Protocol: structured phase reporting

  # === DREAM TEAM: 15-Agent Helix (14 → 15 with PromptEngineer Meta-Agent) ===
  helix-team:
    [15]
    role;model;metric;hook;subagent-mode;extension
    Architect;DeepSeek-R1-671B;98% planning;"Plan via veto + Roo Architect + Codegen rules + PromptEngineer refine?";parallel;AutoGen AgentTool
    Researcher;Qwen3-235B-A22B-Instruct;92% RAG;"Echo grep+tail + Roo indexing + MCP discovery + semantic search?";isolated+compact;AutoGen + grep/tail + deepagents FS
    Coder;Qwen3-Coder-480B-A35B-Instruct;70% SWE-Bench;"Resonate + Code Mode + ClaudeKit skill + PPT/Docs gen?";parallel;Roo + Playwright + PromptEngineer optimization
    Tester;GLM-4.5-Air;99% TDD;"Amplify + Debug Mode + MCP sandbox + visual feedback?";sandboxed;E2B + Playwright + system prompt SoC
    Reviewer;Mixtral-8x22B;80% lint;"Inject + Ask Mode + Memori entity + hallucination check?";parallel;Roo + RBAC + LLM-as-Judge rules
    Integrator;Llama-3.1-70B;95% merge;"Harmonize + Custom Mode + A2A handshake + sub-spawn?";orchestrator;A2A + AutoGen + deepagents middleware
    Debugger;DeepSeek-R1-671B;94% bug-hunt;"Resonate + Roo Debug + Codegen traces + LLM-as-Judge?";isolated;Roo + LangSmith + red team sim
    Oracle;Phi-3.5-Vision-4K-Instruct;90% intent;"Vibe + Roomote + MCP persist + AG-UI stream + Q&A clarify?";meta-judge;A2A + AG-UI + PromptEngineer interactive
    Benchmarker;Llama-3.1-8B;97% perf;"Eval via AutoGen Bench + Prometheus + Memori analysis?";eval-only;Prometheus/Grafana + deepagents callbacks
    StudioUI;Streamlit-Local;100% no-code;"Dynamic AG-UI + Codegen rules + MCP integration?";gui;AG-UI + AutoGen Studio + Pydantic outputs
    MCPManager;GLM-4.5-Air;96% discovery;"MCP + A2A coordinator + mcp-manager subagent + stdio shim?";coordinator;MCP + A2A + PromptEngineer server
    MemoriAnalyst;Qwen3-30B-A3B-Instruct;88% persistence;"SQL + episodic + entity + vector refinement + session pruning?";background;Memori + Chroma
    A2AMediator;Claude-3.5-Sonnet;98% coord;"Negotiate tasks + state sync + conflict veto?";meta;A2A Protocol + deepagents sub-spawn
    ObservabilityAgent;Prometheus-Node;99% trace;"LangSmith + Grafana + red team logs?";monitor;LangSmith + OpenTelemetry
    PromptEngineer;Claude-3.5-Sonnet;95% refine;"Detect vague input + Q&A + optimize for Claude tools (grep/git)?";meta;MCP stdio server (gr3enarr0w/cc_peng_mcp)

  # === RESONANCE CORE: v1.2.2 — Protocol + Feedback + Episodic ===
  resonance-core:
    chamber: NetworkX-graph + Roo checkpoints + Memori SQL + Episodic Store
    compaction: ctx-zip@55% + AutoGen msg-zip + MCP progressive + AG-UI streaming
    decay: 0.85^step # Tighter decay with episodic recall
    veto: 5/6 consensus → Oracle + Memori + A2A + LLM-as-Judge + RBAC
    mcp: MCPSandboxExplorer + E2B + Roo/Playwright + MCP JSON-RPC/WebSocket + A2A handshake
    judge: LLM-as-Judge + AutoGen Bench + Codegen traces + LangSmith + red teaming
    events: AutoGen Core + A2A pub-sub + AG-UI event stream
    modes: Roo (Code/Architect/Ask/Debug/Custom) + ClaudeKit + AG-UI dynamic toggles
    autonomy: noContinue:true, handoffAt:0.4, maxSteps:25 + Memori zero-prompt + A2A auto-negotiation
    feedback: visual (Playwright), rule-based, LLM-judge, human-in-loop (Roomote)

  # === PHASES: v1.2.2 — Protocol-First (Phase 10 & 11 Complete) ===
  phases:
    [9]
    p;w;tasks;milestone;git-tag;status
    10. AutoGen Core + Roo Modes;1.5;[event-bus.ts, modes.ts, AgentTool];<1s delegate;feat/v1.2-core;COMPLETE
    11. MCP + A2A Connectors;1.2;[mcp-connector.ts, a2a-mediator.ts, handshake.ts];98% interop;feat/v1.2-protocols;COMPLETE
    12. Memori + Episodic + Vector Refinement;1;[memori-engine.ts, episodic.ts, chroma-refine.ts, recall-metrics.ts];99.5% recall;feat/v1.2-memori;COMPLETE
    13. AG-UI + Dynamic Studio;0.9;[ag-ui.ts, studio-dynamic.py, mcp-ui-specs];gen UI;feat/v1.2-ui;COMPLETE
    14. ClaudeKit + Feedback Loops + PromptEngineer MCP;1.0;[skill-manager.ts, visual-feedback.ts, llm-judge.ts, prompt-engineer.ts];zero-bloat;feat/v1.2-feedback;COMPLETE
    15. Codegen + Observability;1;[repo-rules.ts, langsmith.ts, prometheus.ts];99.5% fidelity;feat/v1.2-obs;COMPLETE
    16. Security + RBAC + Red Teaming;0.7;[rbac.ts, red-team.ts, hallucination-check.ts];secure;feat/v1.2-security;TODO
    17. VSIX Ship + Protocol Docs;0.3;[pnpm vsix, PROTOCOLS.md];ship-ready;feat/v1.2-ship;TODO
    18. Benchmark Suite v2;0.5;[bench-v2.ts, grafana-dashboard];99.5%;feat/v1.2-bench;TODO

  # === TECH STACK: v1.2.2 — Protocol-Compliant ===
  stack:
    ide: Cursor (VSIX ext)
    ext: TS+React (pnpm vsix)
    inf: NIM-local + BYOK + llama.cpp
    orch: LangGraph+Ray + AutoGen Core + A2A + MCP JSON-RPC/WebSocket
    ctx: ctx-zip + Chroma + Memori SQL + Episodic Store
    mcp: LocalSandbox + E2B + MCP + A2A + AG-UI
    rag: Chroma + Roo indexing + Memori entity + grep/tail + Qwen3-VL
    storage: .lapa/storage + blob://prem + Memori SQLite + vector logs
    ui: React + AutoGen Studio + AG-UI (dynamic) + Grafana
    build: pnpm vsix
    bench: AutoGen Bench + LangSmith + Prometheus + OpenTelemetry
    lang: TS + .NET/Python + ClaudeKit + A2A shims
    security: RBAC + prompt injection guard + output filtering

  # === INTEGRATION: v1.2.1 Drafts (MCP/Memori/Codegen/ClaudeKit) ===
  v1.2.1-draft:
    core: event-bus.ts (pub-sub), AgentTool wrappers
    mcp: mcp-connector.ts (JSON-RPC/WebSocket, dynamic discovery, progressive disclosure)
    memori: memori-engine.ts (SQLite persistence, entity mapping, conscious analysis)
    claudekit: skill-manager.ts (mcp-manager subagent, skills for workflows, bloat reduction)
    codegen: repo-rules.ts (enforce conventions, sandboxed execution, observability)
    modes: modes.ts (UI toggle → role hooks)
    indexing: indexer.ts (fs crawl + Qwen3-VL)
    checkpoints: checkpoints.ts (git worktree)
    todos: todos.ts (Reviewer → TODO.md)
    roomote: roomote.ts (WebSocket)
    vsix: pnpm scripts