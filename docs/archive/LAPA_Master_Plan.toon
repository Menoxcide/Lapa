v1.3.0-preview:
  name: SwarmOS Edition
  codename: Collaborative-Multimodal Ecosystem Swarm
  version: 1.3.0
  date: 2025-11-12
  branch: v1.3-swarm-os
  git-cycle: v1.2.2-complete → swarm-os-preview → phase19+ → tag-ship
  resume-from: src/swarm/sessions.ts  # New for Phase 19
  target: <1s handoff, 99.8% fidelity (SwarmOS ROI Dashboard), 0% cloud, Ecosystem-Native
  premium: { mo:12, yr:99 }
  license: MIT
  repo: github.com/Menoxcide/Lapa
  site: lapa.ai

  # === PROTOCOL LAYER: A2A + MCP + AG-UI + WebRTC (SwarmOS Extensions) ===
  protocols:
    a2a: true  # Agent-to-Agent: handshake, task negotiation, state sync
    mcp: v1.2  # Model Context Protocol: JSON-RPC/WebSocket + stdio transport (PromptEngineer)
    ag-ui: v1.0 # Agent-to-UI: generative components, event streams
    ui-specs: mcp-ui + open-json-ui  # For dynamic Studio UI + interactive Q&A
    lpsp: v1.0  # LAPA Phase Summary Protocol: structured phase reporting
    webrtc: v1.0  # Multi-user collab sessions (Phase 19)
    vision-voice: v1.0  # Multimodal input/output (Phase 20)
    marketplace: v1.0  # On-chain skill registry (Phase 21)

  # === DREAM TEAM: 16-Agent Helix (+ CollabAgent for SwarmOS) ===
  helix-team:
    [16]
    role;model;metric;hook;subagent-mode;extension
    Architect;DeepSeek-R1-671B;98% planning;"Plan via veto + Roo Architect + Codegen rules + PromptEngineer refine?";parallel;AutoGen AgentTool
    Researcher;Qwen3-235B-A22B-Instruct;92% RAG;"Echo grep+tail + Roo indexing + MCP discovery + semantic search?";isolated+compact;AutoGen + grep/tail + deepagents FS
    Coder;Qwen3-Coder-480B-A35B-Instruct;70% SWE-Bench;"Resonate + Code Mode + ClaudeKit skill + PPT/Docs gen?";parallel;Roo + Playwright + PromptEngineer optimization
    Tester;GLM-4.5-Air;99% TDD;"Amplify + Debug Mode + MCP sandbox + visual feedback?";sandboxed;E2B + Playwright + system prompt SoC
    Reviewer;Mixtral-8x22B;80% lint;"Inject + Ask Mode + Memori entity + hallucination check?";parallel;Roo + RBAC + LLM-as-Judge rules
    Integrator;Llama-3.1-70B;95% merge;"Harmonize + Custom Mode + A2A handshake + sub-spawn?";orchestrator;A2A + AutoGen + deepagents middleware
    Debugger;DeepSeek-R1-671B;94% bug-hunt;"Resonate + Roo Debug + Codegen traces + LLM-as-Judge?";isolated;Roo + LangSmith + red team sim
    Oracle;Phi-3.5-Vision-4K-Instruct;90% intent;"Vibe + Roomote + MCP persist + AG-UI stream + Q&A clarify?";meta-judge;A2A + AG-UI + PromptEngineer interactive
    Benchmarker;Llama-3.1-8B;97% perf;"Eval via AutoGen Bench + Prometheus + Memori analysis?";eval-only;Prometheus/Grafana + deepagents callbacks
    StudioUI;Streamlit-Local;100% no-code;"Dynamic AG-UI + Codegen rules + MCP integration?";gui;AG-UI + AutoGen Studio + Pydantic outputs
    MCPManager;GLM-4.5-Air;96% discovery;"MCP + A2A coordinator + mcp-manager subagent + stdio shim?";coordinator;MCP + A2A + PromptEngineer server
    MemoriAnalyst;Qwen3-30B-A3B-Instruct;88% persistence;"SQL + episodic + entity + vector refinement + session pruning?";background;Memori + Chroma
    A2AMediator;Claude-3.5-Sonnet;98% coord;"Negotiate tasks + state sync + conflict veto?";meta;A2A Protocol + deepagents sub-spawn
    ObservabilityAgent;Prometheus-Node;99% trace;"LangSmith + Grafana + red team logs?";monitor;LangSmith + OpenTelemetry
    PromptEngineer;Claude-3.5-Sonnet;95% refine;"Detect vague input + Q&A + optimize for Claude tools (grep/git)?";meta;MCP stdio server (gr3enarr0w/cc_peng_mcp)
    CollabAgent;Claude-3.5-Sonnet;97% collab;"WebRTC sessions + cross-user veto?";multi-user;WebRTC + A2A extensions

  # === RESONANCE CORE: v1.3 — SwarmOS Extensions ===
  resonance-core:
    chamber: NetworkX-graph + Roo checkpoints + Memori SQL + Episodic Store + Collab Sessions
    compaction: ctx-zip@55% + AutoGen msg-zip + MCP progressive + AG-UI streaming
    decay: 0.85^step # Tighter decay with episodic recall
    veto: 5/6 consensus → Oracle + Memori + A2A + LLM-as-Judge + RBAC + Collab Veto
    mcp: MCPSandboxExplorer + E2B + Roo/Playwright + MCP JSON-RPC/WebSocket + A2A handshake
    judge: LLM-as-Judge + AutoGen Bench + Codegen traces + LangSmith + red teaming
    events: AutoGen Core + A2A pub-sub + AG-UI event stream + WebRTC Sync
    modes: Roo (Code/Architect/Ask/Debug/Custom) + ClaudeKit + AG-UI dynamic toggles + Collab Mode
    autonomy: noContinue:true, handoffAt:0.4, maxSteps:25 + Memori zero-prompt + A2A auto-negotiation
    feedback: visual (Playwright), rule-based, LLM-judge, human-in-loop (Roomote + Voice)

  # === PHASES: v1.3 SwarmOS — Post-v1.2.2 Complete ===
  phases:
    [21]
    p;w;tasks;milestone;git-tag;status
    10. AutoGen Core + Roo Modes;1.5;[event-bus.ts, modes.ts, AgentTool];<1s delegate;feat/v1.2-core;COMPLETE
    11. MCP + A2A Connectors;1.2;[mcp-connector.ts, a2a-mediator.ts, handshake.ts];98% interop;feat/v1.2-protocols;COMPLETE
    12. Memori + Episodic + Vector Refinement;1;[memori-engine.ts, episodic.ts, chroma-refine.ts];99.5% recall;feat/v1.2-memori;COMPLETE
    13. AG-UI + Dynamic Studio;0.9;[ag-ui.ts, studio-dynamic.py, mcp-ui-specs];gen UI;feat/v1.2-ui;COMPLETE
    14. ClaudeKit + Feedback Loops + PromptEngineer MCP;1.0;[skill-manager.ts, visual-feedback.ts, llm-judge.ts, prompt-engineer.ts];zero-bloat;feat/v1.2-feedback;COMPLETE
    15. Codegen + Observability;1;[repo-rules.ts, langsmith.ts, prometheus.ts];99.5% fidelity;feat/v1.2-obs;COMPLETE
    16. Security + RBAC + Red Teaming;0.7;[rbac.ts, red-team.ts, hallucination-check.ts];secure;feat/v1.2-security;COMPLETE
    17. VSIX Ship + Protocol Docs;0.3;[pnpm vsix, PROTOCOLS.md];ship-ready;feat/v1.2-ship;COMPLETE
    18. Benchmark Suite v2;0.5;[bench-v2.ts, grafana-dashboard];99.5%;feat/v1.2-bench;COMPLETE
    19. Collaborative Swarm;1.5;[swarm/sessions.ts, webrtc-sync.ts];95% multi-user uptime;feat/v1.3-collab;IN PROGRESS
    20. Multimodal Mastery;2;[multimodal/vision-voice.ts, tts-stt.ts];90% multimodal accuracy;feat/v1.3-multimodal;TODO
      # === PHASE 21: ECOSYSTEM IGNITION (SwarmOS) ===
    21. Ecosystem Ignition;2.0;
        [marketplace/registry.ts, roi-dashboard.ts, ui/SwarmMarketplace.tsx, ui/ROIWidget.tsx, 
        src/inference/manager.ts, src/ui/SwarmView.tsx, src/ui/SwarmControls.tsx, 
        src/ui/IndexPopup.tsx, src/ui/InlineEditor.tsx];
        100K skills + 99.8% ROI + 0% cloud;
        feat/v1.3-ecosystem;
        DESIGN COMPLETE

    # === ECOSYSTEM CORE ===
    marketplace:
      registry: on-chain (IPFS + LAPA DID) + local cache
      browser: SwarmMarketplace.tsx (search, install, rate, ROI badge)
      install: one-click → skill-manager.ts → A2A handshake
      skills: 100K+ target (v1.3.1)
      auth: RBAC + CollabAgent veto

    roi-dashboard:
      widget: ROIWidget.tsx (real-time "Saved: 2.5h this week")
      metrics: tokens saved, handoffs avoided, bugs prevented
      source: ObservabilityAgent + LangSmith + Prometheus
      fidelity: 99.8% (validated via Benchmark Suite v2)

    virality:
      export: GIF + JSON replay (html2canvas + WebRTC sync)
      share: sessionId → WebRTC join link
      embed: <lapa-replay id="swarm-2025-11-13" />

    # === UI INTEGRATION (Phase 21) ===
    ui-enhancements:
      SwarmMarketplace.tsx: inline in StudioUI
      ROIWidget.tsx: floating badge in SwarmView
      ExportReplayButton: in SwarmControls
      ShareSessionButton: generates WebRTC invite

    # === INFERENCE + PERFORMANCE (Phase 21) ===
    inference-v2:
      manager: src/inference/manager.ts (health checks, thermal guard, auto-fallback)
      perf-modes: hardware-aware, thermal-capped, batchSize adaptive
      default: ollama + perfMode=5
      nim-switch: seamless, live-preview, simulation

    # === SWARM VIEW v2 (Phase 21) ===
    swarm-view:
      canvas: React Flow + zoom/pan
      nodes: AgentNode (avatar, progress, badge)
      edges: HandoffEdge (latency, animated)
      overlays: PerfHeatmap (VRAM/RAM/CPU/Temp), color-blind mode
      inline: ApprovalGate + InlineDiff + ThoughtBubble

    # === INDEX POPUP v2 (Phase 21) ===
    index-popup:
      nl-input: + AI refine (PromptEngineer)
      drag-drop: files, folders, GitHub, workspace
      progress: 95% RAG recall in <30s
      start: auto-spawn swarm with RAG context

    # === ACCESSIBILITY & STANDARDS (Phase 21) ===
    accessibility:
      wcag: 2.2 AA compliant
      aria: labels, roles, keyboard nav
      color-blind: pattern overlays in heatmaps
      voice: input bar + alerts ("Handoff complete")

    # === VIRALITY & GROWTH (Phase 21) ===
    growth:
      gif-export: 8h effort → 100x shareability
      roi-widget: "Saved 2.5h" → retention driver
      marketplace: skill ecosystem → network effect

    # PHASE 21 SPRINT
      1. UI: SwarmMarketplace + ROIWidget + ExportReplay
      2. Inference v2: manager.ts + thermal guard + auto-fallback
      3. Swarm View v2: React Flow + Approval Gates + Heatmap
     4. Index Popup v2: AI refine + drag-drop + RAG
      5. Virality: GIF export + WebRTC share + LRP
      6. Accessibility: ARIA + voice + color-blind
      7. Docs: START_HERE, AGENT, PROTOCOLS, LPSP
      8. Release v1.3.0 SwarmOS
      
  # === TECH STACK: v1.3 SwarmOS ===
  stack:
    ide: Cursor (VSIX ext)
    ext: TS+React (pnpm vsix)
    inf: NIM-local + BYOK + llama.cpp + WebRTC
    orch: LangGraph+Ray + AutoGen Core + A2A + MCP JSON-RPC/WebSocket
    ctx: ctx-zip + Chroma + Memori SQL + Episodic Store
    mcp: LocalSandbox + E2B + MCP + A2A + AG-UI + Marketplace API
    rag: Chroma + Roo indexing + Memori entity + grep/tail + Qwen3-VL + Voice
    storage: .lapa/storage + blob://prem + Memori SQLite + vector logs + On-Chain
    ui: React + AutoGen Studio + AG-UI (dynamic) + Grafana + WebRTC Sessions
    build: pnpm vsix
    bench: AutoGen Bench + LangSmith + Prometheus + OpenTelemetry + ROI Dashboard
    lang: TS + .NET/Python + ClaudeKit + A2A shims + TTS/STT
    security: RBAC + prompt injection guard + output filtering + Collab Auth

  # === INTEGRATION: v1.3 Drafts (SwarmOS) ===
  v1.3-draft:
    collab: sessions.ts (WebRTC multi-user), cross-user-veto.ts
    multimodal: vision-voice.ts (screenshot gen), tts-stt.ts (offline voice)
    ecosystem: marketplace/registry.ts (on-chain skills), roi-dashboard.ts (time saved metrics)